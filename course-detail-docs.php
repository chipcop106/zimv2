<?php require_once( 'head.php' ); ?>
<?php require_once( 'header.php' ); ?>
<link href="lib/fullcalendar/fullcalendar.min.css" rel="stylesheet">
<div class="content content-fixed">
    <div class="container pd-x-0 pd-lg-x-10 pd-xl-x-0">
        <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-xl-3">
                <div class="navigator">
                    <div class="card-body pd-0">
                    <label class="tx-uppercase tx-sans tx-10 tx-medium tx-spacing-1 tx-color-03 mg-b-15">Danh mục</label>
                        <ul class="list-menu">
                            <li class="menu-item ">
                                <a href="course-detail-schedule.php" class="menu-link"><i data-feather="calendar"></i>Lịch học</a>
                            </li>
                            <li class="menu-item active">
                                <a href="course-detail-docs.php" class="menu-link"><i data-feather="book"></i>Tài liệu</a>
                            </li>
                            <li class="menu-item">
                                <a href="course-detail-exercise.php" class="menu-link"><i data-feather="book-open"></i>Bài tập</a>
                            </li>
                            <li class="menu-item">
                                <a href="course-detail-notification.php" class="menu-link"><i data-feather="bell"></i>Thông báo</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="schedule-coming">
                    <label class="tx-uppercase tx-sans tx-10 tx-medium tx-spacing-1 tx-color-03 mg-b-15">Ca học sắp tới</label>
                    <div class="schedule-group">
                        <a href="#" class="schedule-item bd-l bd-2 bd-danger">
                            <h6>A-IELST Master Series - 502 </h6>
                            <span>8:00am - 9:00am, 27/04/2019</span>
                        </a><!-- schedule-item -->
                        <a href="#" class="schedule-item bd-l bd-2 bd-success">
                        <h6>A-IELST Beginner - 502</h6>
                            <span>8:00am - 9:00am, 27/04/2019</span>
                        </a><!-- schedule-item -->
                        <a href="#" class="schedule-item bd-l bd-2 bd-primary">
                            <h6>A-IELST Foundation - 502</h6>
                            <span>8:00am - 9:00am, 27/04/2019</span>
                        </a><!-- schedule-item -->
                        <a href="#" class="schedule-item bd-l bd-2 bd-danger">
                            <h6>A-IELST Master - 502</h6>
                            <span>8:00am - 9:00am, 27/04/2019</span>
                        </a><!-- schedule-item -->
                        <a href="#" class="schedule-item bd-l bd-2 bd-success">
                        <h6>A-IELST Master - 502</h6>
                            <span>8:00am - 9:00am, 27/04/2019</span>
                        </a><!-- schedule-item -->
                        <a href="#" class="schedule-item bd-l bd-2 bd-primary">
                            <h6>A-IELST Master - 502 </h6>
                            <span>8:00am - 9:00am, 27/04/2019</span>
                        </a><!-- schedule-item -->
                    </div>
                </div>
                
            </div>
            <div class="col-12 colsm-12 col-md-12 col-xl-9">
                <div class="docs-wrap">
                    <div class="card">
                        <div class="card-header">
                            <div class="top-filter">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="title mg-b-0">Tài liệu khoá học</h6>
                                    <a href="javascript:;" class="btn btn-primary">Thêm tài liệu</a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex docs-list flex-wrap align-items-start">
                                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                                    <div class="doc-item-wrap">
                                        <div class="doc-image">
                                            <img src="https://app.zim.vn/Upload/zimdocument/3d825603-548d-49c2-acff-b1b05775ba25.png" alt="300">
                                        </div>
                                        <div class="doc-link">
                                            <a href="#">IELTS Special Journals Jan 2019.pdf</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                                    <div class="doc-item-wrap">
                                        <div class="doc-image">
                                            <img src="https://app.zim.vn/Upload/zimdocument/5a61cfd1-3fff-4eac-be47-42c8d4fee296.png" alt="300">
                                        </div>
                                        <div class="doc-link">
                                            <a href="#">IELTS Special Journals Jan 2019.pdf</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                                    <div class="doc-item-wrap">
                                        <div class="doc-image">
                                            <img src="https://app.zim.vn/Upload/zimdocument/5a61cfd1-3fff-4eac-be47-42c8d4fee296.png" alt="300">
                                        </div>
                                        <div class="doc-link">
                                            <a href="#">IELTS Special Journals Jan 2019.pdf</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                                    <div class="doc-item-wrap">
                                        <div class="doc-image">
                                            <img src="https://app.zim.vn/Upload/zimdocument/5a61cfd1-3fff-4eac-be47-42c8d4fee296.png" alt="300">
                                        </div>
                                        <div class="doc-link">
                                            <a href="#">IELTS Special Journals Jan 2019.pdf</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                                    <div class="doc-item-wrap">
                                        <div class="doc-image">
                                            <img src="https://app.zim.vn/Upload/zimdocument/5a61cfd1-3fff-4eac-be47-42c8d4fee296.png" alt="300">
                                        </div>
                                        <div class="doc-link">
                                            <a href="#">IELTS Special Journals Jan 2019.pdf</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                                    <div class="doc-item-wrap">
                                        <div class="doc-image">
                                            <img src="https://app.zim.vn/Upload/zimdocument/5a61cfd1-3fff-4eac-be47-42c8d4fee296.png" alt="300">
                                        </div>
                                        <div class="doc-link">
                                            <a href="#">IELTS Special Journals Jan 2019.pdf</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                 
                </div>
            </div>
        </div>
    </div><!-- container -->
</div><!-- content -->
<?php require_once( 'footer.php' ); ?>
<script src="lib/moment/min/moment.min.js"></script>
<script src="lib/fullcalendar/fullcalendar.min.js"></script>

<script>
    $(document).ready(function(){
          // Initialize fullCalendar
                  // Calendar Event Source
        var curYear = moment().format('YYYY');
        var curMonth = moment().format('MM');
        var calendarEvents = {
                id: 1,
                backgroundColor: '#f7f7f7',
                borderColor:'transparent',
                events: [
                    {
                    id: '1',
                    start: curYear+'-'+curMonth+'-08T08:30:00',
                    end: curYear+'-'+curMonth+'-08T13:00:00',
                    info:{
                        room:'502',
                        teacher:'Trương Văn A',
                        course:'A-IELST Master',
                        branch:'65 - Võ Oanh',
                        subject:'Listening',
                        borderColor:'#63bf0e'
                    },
   
                    },{
                    id: '2',
                    start: curYear+'-'+curMonth+'-22T09:00:00',
                    end: curYear+'-'+curMonth+'-22T17:00:00',
                    info:{
                        room:'502',
                        teacher:'Trương Văn Hoàng',
                        course:'A-IELST Master',
                        branch:'65 - Võ Oanh',
                        subject:'Listening',
                        borderColor:'#63bf0e'
                    },
   
                    },{
                    id: '3',
                    start: curYear+'-'+curMonth+'-23T12:00:00',
                    end: curYear+'-'+curMonth+'-23T18:00:00',
                    info:{
                        room:'502',
                        teacher:'Trương Văn Liên',
                        course:'A-IELST Master',
                        branch:'65 - Võ Oanh',
                        subject:'Listening',
                        borderColor:'#63bf0e'
                    },
   
                    },{
                    id: '4',
                    start: curYear+'-'+curMonth+'-25T07:30:00',
                    end: curYear+'-'+curMonth+'-25T15:30:00',
                    info:{
                        room:'502',
                        teacher:'Trương Văn A',
                        course:'A-IELST Master',
                        branch:'65 - Võ Oanh',
                        subject:'Listening',
                        borderColor:'#f7f7f7'
                    },
                    },{
                    id: '5',
                    start: curYear+'-'+curMonth+'-29T10:00:00',
                    end: curYear+'-'+curMonth+'-29T15:30:00',
                    info:{
                        room:'502',
                        teacher:'Trương Văn A',
                        course:'A-IELST Master',
                        branch:'65 - Võ Oanh',
                        subject:'Listening',
                        borderColor:'red'
                    },
   
                    },{
                    id: '6',
                    start: curYear+'-'+curMonth+'-28T13:00:00',
                    end: curYear+'-'+curMonth+'-28T18:30:00',
                    info:{
                        room:'502',
                        teacher:'Trương Văn A',
                        course:'A-IELST Master',
                        branch:'65 - Võ Oanh',
                        subject:'Listening',
                        borderColor:'#f7f7f7'
                    },
           
                    }
                ]
                };
        $('#schedule-calendar').fullCalendar({
            height: 'parent',
            eventLimit: false,
            timeFormat:'HH:mm',
            header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay,listWeek'
            },
            navLinks: true,
            slotEventOverlap:false,
            selectable: false,
            displayEventEnd:true,
            selectLongPressDelay: 100,
            editable: false,
            nowIndicator: true,
            defaultView: 'listMonth',
            views: {
            agenda: {
                columnHeaderHtml: function(mom) {
                return '<span>' + mom.format('ddd') + '</span>' +' '+
                        '<span>' + mom.format('DD') + '</span>';
                }
            },
            day: { columnHeader: false },
            listMonth: {
                listDayFormat: 'ddd DD',
                listDayAltFormat: false
            },
            listWeek: {
                listDayFormat: 'ddd DD',
                listDayAltFormat: false
            },
            agendaThreeDay: {
                type: 'agenda',
                duration: { days: 3 },
                titleFormat: 'MMMM YYYY'
            }
            },

            events: calendarEvents,
            eventAfterAllRender: function(view) {
            if(view.name === 'listMonth' || view.name === 'listWeek') {
                var dates = view.el.find('.fc-list-heading-main');
                dates.each(function(){
                var text = $(this).text().split(' ');
                var now = moment().format('DD');

                $(this).html(text[0]+'<span>'+text[1]+'</span>');
                if(now === text[1]) { $(this).addClass('now'); }
                });
            }
            },
            eventRender: function(event, element) {
            // if(event.description) {
            //     element.find('.fc-list-item-title').append('<span class="fc-desc">' + event.description + '</span>');
            //     element.find('.fc-content').append('<span class="fc-desc">' + event.description + '</span>');
            // }
            if(event.info){
                if(element.find('.fc-list-item-title').length >0){
                    element.find('.fc-list-item-title').append(
                `<div class="box-info">
                    <p class="txt">Room: ${event.info.room}</p>
                    <p class="txt">${event.info.teacher}</p>
                    <p class="txt">${event.info.course}</p>
                    <p class="txt">${event.info.branch}</p>
                    <p class="txt"><span class="subject">${event.info.subject}</span></p>
                </div> ` );
                }else{
                    element.append(
                    `<div class="box-info">
                        <p class="txt">Room: ${event.info.room}</p>
                        <p class="txt">${event.info.teacher}</p>
                        <p class="txt">${event.info.course}</p>
                        <p class="txt">${event.info.branch}</p>
                        <p class="txt"><span class="subject">${event.info.subject}</span></p>
                    </div>
                    `
                );
                }
             
            }
            
            var eBorderColor = (event.source.borderColor)? event.info.borderColor : 'rgb(247, 247, 247)';
            element.find('.fc-event-dot').css('backgroundColor',eBorderColor)
            element.css('borderLeft', `2px solid ${eBorderColor}`);
            },
        });
        var calendar = $('#schedule-calendar').fullCalendar('getCalendar');
        // change view to week when in tablet
        if(window.matchMedia('(min-width: 576px)').matches) {
            calendar.changeView('agendaWeek');
        }

        // change view to month when in desktop
        if(window.matchMedia('(min-width: 992px)').matches) {
            calendar.changeView('month');
        }

        // change view based in viewport width when resize is detected
        calendar.option('windowResize', function(view) {
            if(view.name === 'listWeek') {
            if(window.matchMedia('(min-width: 992px)').matches) {
                calendar.changeView('month');
            } else {
                calendar.changeView('listWeek');
            }
            }
        });
     
    });
</script>
